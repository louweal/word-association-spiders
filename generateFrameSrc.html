<!DOCTYPE html>
<html>
<head>

<style>
input {
  width: 75%;
}
</style>
</head>
<body>

<h2>Generate frame source URL</h2>
<p>Converts a non-secure local jatos URL (for testing purposes) to a secure URL that can be embedded in Qualtrics.</p>
<label for="jatosURL">Your Jatos URL:</label><br>
<input type="text" id="jatosURL" name="jatosURL" value=""><br>
<i>e.g. http://127.0.0.1:9000/publix/4/start?batchId=4&generalMultiple</i><br><br>
<label for="inceptionPortal">Inception Portal (read-only):</label><br>
<input type="text" readonly="readonly" id="inceptionPortal" name="inceptionPortal" value="https://physiodatatoolbox.leidenuniv.nl/wp-content/uploads/2020/04/iframeInception.html"><br><br>

<input type="submit" value="Generate!" onclick="parseURL()">

<script>
  function parseURL() {
  	var jatosURL = document.getElementById("jatosURL").value;
  	var inceptionPortal = document.getElementById("inceptionPortal").value;
    var frameSrcStr = decodeURIComponent(inceptionPortal) + '?frameurl=' + encodeURIComponent(jatosURL);
		console.log(frameSrcStr);
    document.write('<p>Your frame source URL: <br>' + frameSrcStr + '</p>');
    return frameSrcStr; 
  }
</script>

</body>
</html> 
